<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è³¼ç‰©ç²¾ç®—å¸«</title>
    <style>
        * { box-sizing: border-box; }

        :root {
            --primary-color: #00b894; /* ç²¾ç®—ç¶  */
            --cheap-color: #d63031;   /* ä¾¿å®œç´… */
            --bg-color: #f1f2f6;
            --card-bg: #ffffff;
            --text-color: #2d3436;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            margin: 0;
            padding: 15px;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }

        h1 { margin: 10px 0; font-size: 1.8rem; color: var(--primary-color); text-align: center; }

        /* --- åˆ†é åˆ‡æ› --- */
        .tabs {
            display: flex;
            width: 100%;
            max-width: 500px;
            background: #dfe6e9;
            border-radius: 25px;
            padding: 4px;
            margin-bottom: 20px;
        }
        .tab-btn {
            flex: 1;
            padding: 10px;
            border: none;
            background: transparent;
            border-radius: 20px;
            font-weight: bold;
            color: #636e72;
            cursor: pointer;
            transition: 0.3s;
        }
        .tab-btn.active {
            background: white;
            color: var(--primary-color);
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        /* --- å…§å®¹å€å¡Š --- */
        .content-section { display: none; width: 100%; max-width: 500px; }
        .content-section.active { display: block; }

        /* --- å¡ç‰‡æ¨£å¼ --- */
        .card {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
            border: 2px solid transparent;
            transition: 0.3s;
        }

        .card.winner {
            border-color: var(--cheap-color);
            background-color: #fff0f0;
            transform: scale(1.02);
        }

        .card-header { font-weight: bold; margin-bottom: 10px; display: flex; justify-content: space-between; }
        .winner-badge { display: none; color: var(--cheap-color); font-weight: bold; }
        .card.winner .winner-badge { display: block; }

        /* è¼¸å…¥ç¾¤çµ„ */
        .input-group { margin-bottom: 10px; display: flex; flex-direction: column; }
        .input-group label { font-size: 0.9rem; color: #636e72; margin-bottom: 3px; }
        
        input, select {
            padding: 10px;
            border: 1px solid #dfe6e9;
            border-radius: 8px;
            font-size: 1rem;
            width: 100%;
            outline: none;
        }
        input:focus { border-color: var(--primary-color); }

        /* çµæœé¡¯ç¤º */
        .result-row {
            margin-top: 10px;
            padding-top: 10px;
            border-top: 1px dashed #b2bec3;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .unit-price { font-size: 1.4rem; font-weight: bold; color: #636e72; }
        .card.winner .unit-price { color: var(--cheap-color); }

        /* --- æŠ˜æ‰£è¨ˆç®—æ©Ÿå°ˆç”¨ --- */
        .calc-options { display: flex; flex-direction: column; gap: 10px; }
        .calc-option {
            display: flex;
            align-items: center;
            padding: 10px;
            border: 1px solid #dfe6e9;
            border-radius: 10px;
            cursor: pointer;
        }
        .calc-option.selected { border-color: var(--primary-color); background-color: #e8f8f5; }
        .radio-circle {
            width: 20px; height: 20px; border-radius: 50%;
            border: 2px solid #b2bec3; margin-right: 10px;
            display: flex; align-items: center; justify-content: center;
        }
        .calc-option.selected .radio-circle { border-color: var(--primary-color); }
        .radio-inner { width: 10px; height: 10px; background: var(--primary-color); border-radius: 50%; display: none; }
        .calc-option.selected .radio-inner { display: block; }

        .calc-result-box {
            background: var(--primary-color);
            color: white;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            margin-top: 20px;
        }
        .final-price { font-size: 2.5rem; font-weight: bold; }
        .sub-info { opacity: 0.9; font-size: 0.9rem; }

        .footer { margin-top: 30px; text-align: center; color: #b2bec3; font-size: 0.8rem; }

    </style>
</head>
<body>

    <h1>ğŸ›’ è³¼ç‰©ç²¾ç®—å¸«</h1>

    <!-- åˆ‡æ›é ç±¤ -->
    <div class="tabs">
        <button class="tab-btn active" onclick="switchTab('compare')">âš–ï¸ A/B æ¯”åƒ¹</button>
        <button class="tab-btn" onclick="switchTab('discount')">ğŸ§® æŠ˜æ‰£è§£å¯†</button>
    </div>

    <!-- é è¨­é¸å–® (å…±ç”¨) -->
    <datalist id="store-list">
        <option value="å…¨è¯">
        <option value="å¥½å¸‚å¤š">
        <option value="èœå¸‚å ´">
        <option value="MOMO">
        <option value="é…·æ¾">
        <option value="è¦çš®">
    </datalist>

    <!-- é é¢ä¸€ï¼šæ¯”åƒ¹æ¨¡å¼ -->
    <div id="tab-compare" class="content-section active">
        <!-- å•†å“ A -->
        <div class="card" id="card-a">
            <div class="card-header">
                <span>é¸æ‰‹ A</span>
                <span class="winner-badge">ğŸ‘‘ æ¯”è¼ƒä¾¿å®œï¼</span>
            </div>
            <div class="input-group">
                <label>å•†åº—/è³£å ´</label>
                <input list="store-list" placeholder="é¸æ“‡æˆ–è¼¸å…¥..." oninput="calculateCompare()">
            </div>
            <div class="input-group">
                <label>æ•¸é‡/é‡é‡ (ä¾‹å¦‚: 120æŠ½, 500g)</label>
                <input type="number" id="amount-a" placeholder="è¼¸å…¥æ•¸å­—" oninput="calculateCompare()">
            </div>
            <div class="input-group">
                <label>ç¸½åƒ¹æ ¼</label>
                <input type="number" id="price-a" placeholder="$$$" oninput="calculateCompare()">
            </div>
            <div class="result-row">
                <span>å–®åƒ¹ï¼š</span>
                <span class="unit-price" id="unit-a">---</span>
            </div>
        </div>

        <!-- å•†å“ B -->
        <div class="card" id="card-b">
            <div class="card-header">
                <span>é¸æ‰‹ B</span>
                <span class="winner-badge">ğŸ‘‘ æ¯”è¼ƒä¾¿å®œï¼</span>
            </div>
            <div class="input-group">
                <label>å•†åº—/è³£å ´</label>
                <input list="store-list" placeholder="é¸æ“‡æˆ–è¼¸å…¥..." oninput="calculateCompare()">
            </div>
            <div class="input-group">
                <label>æ•¸é‡/é‡é‡</label>
                <input type="number" id="amount-b" placeholder="è¼¸å…¥æ•¸å­—" oninput="calculateCompare()">
            </div>
            <div class="input-group">
                <label>ç¸½åƒ¹æ ¼</label>
                <input type="number" id="price-b" placeholder="$$$" oninput="calculateCompare()">
            </div>
            <div class="result-row">
                <span>å–®åƒ¹ï¼š</span>
                <span class="unit-price" id="unit-b">---</span>
            </div>
        </div>
    </div>

    <!-- é é¢äºŒï¼šæŠ˜æ‰£è¨ˆç®— -->
    <div id="tab-discount" class="content-section">
        <div class="card">
            <div class="input-group">
                <label>å•†å“åŸåƒ¹ (å–®ä»¶)</label>
                <input type="number" id="orig-price" placeholder="$$$" oninput="calculateDiscount()">
            </div>

            <label style="font-size:0.9rem; color:#636e72; margin-bottom:5px; display:block;">é¸æ“‡ä¿ƒéŠ·é¡å‹ï¼š</label>
            <div class="calc-options">
                <!-- é¸é … 1 -->
                <div class="calc-option selected" onclick="selectOption(1)">
                    <div class="radio-circle"><div class="radio-inner"></div></div>
                    <div style="flex:1">
                        <div>ç¬¬äºŒä»¶ XX å…ƒ</div>
                        <div style="display:flex; align-items:center; margin-top:5px;">
                            <span style="margin-right:5px;">ç¬¬äºŒä»¶åªè¦</span>
                            <input type="number" id="val-1" style="width:80px; padding:5px;" placeholder="$" oninput="calculateDiscount()">
                            <span style="margin-left:5px;">å…ƒ</span>
                        </div>
                    </div>
                </div>

                <!-- é¸é … 2 -->
                <div class="calc-option" onclick="selectOption(2)">
                    <div class="radio-circle"><div class="radio-inner"></div></div>
                    <div style="flex:1">
                        <div>ç¬¬äºŒä»¶ XX æŠ˜</div>
                        <div style="display:flex; align-items:center; margin-top:5px;">
                            <span style="margin-right:5px;">ç¬¬äºŒä»¶æ‰“</span>
                            <input type="number" id="val-2" style="width:80px; padding:5px;" placeholder="ä¾‹å¦‚ 6" oninput="calculateDiscount()">
                            <span style="margin-left:5px;">æŠ˜</span>
                        </div>
                    </div>
                </div>

                <!-- é¸é … 3 -->
                <div class="calc-option" onclick="selectOption(3)">
                    <div class="radio-circle"><div class="radio-inner"></div></div>
                    <div style="flex:1">
                        <div>XX ä»¶å…± XX å…ƒ</div>
                        <div style="display:flex; align-items:center; margin-top:5px; gap:5px;">
                            <input type="number" id="val-3a" style="width:60px; padding:5px;" placeholder="å¹¾ä»¶" oninput="calculateDiscount()">
                            <span>ä»¶ï¼Œå…±</span>
                            <input type="number" id="val-3b" style="width:80px; padding:5px;" placeholder="$" oninput="calculateDiscount()">
                            <span>å…ƒ</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="calc-result-box">
                <div style="font-size:0.9rem; margin-bottom:5px;">å¹³å‡æ¯ä»¶å–®åƒ¹</div>
                <div class="final-price" id="final-unit-price">0</div>
                <div class="sub-info" id="discount-info">ç›¸ç•¶æ–¼åŸåƒ¹ -- æŠ˜</div>
            </div>
        </div>
    </div>

    <div class="footer">Freddy & Gemini 3 Pro Smart Shopping</div>

    <script>
        // --- é ç±¤åˆ‡æ› ---
        function switchTab(tab) {
            document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
            document.querySelectorAll('.content-section').forEach(c => c.classList.remove('active'));
            
            if (tab === 'compare') {
                document.querySelector('.tab-btn:nth-child(1)').classList.add('active');
                document.getElementById('tab-compare').classList.add('active');
            } else {
                document.querySelector('.tab-btn:nth-child(2)').classList.add('active');
                document.getElementById('tab-discount').classList.add('active');
            }
        }

        // --- æ¯”åƒ¹åŠŸèƒ½ ---
        function calculateCompare() {
            const amountA = parseFloat(document.getElementById('amount-a').value);
            const priceA = parseFloat(document.getElementById('price-a').value);
            const amountB = parseFloat(document.getElementById('amount-b').value);
            const priceB = parseFloat(document.getElementById('price-b').value);

            let unitA = Infinity, unitB = Infinity;

            if (amountA > 0 && priceA > 0) {
                unitA = priceA / amountA;
                document.getElementById('unit-a').innerText = unitA.toFixed(2);
            } else {
                document.getElementById('unit-a').innerText = "---";
            }

            if (amountB > 0 && priceB > 0) {
                unitB = priceB / amountB;
                document.getElementById('unit-b').innerText = unitB.toFixed(2);
            } else {
                document.getElementById('unit-b').innerText = "---";
            }

            // åˆ¤å®šè´å®¶
            document.getElementById('card-a').classList.remove('winner');
            document.getElementById('card-b').classList.remove('winner');

            if (unitA !== Infinity && unitB !== Infinity) {
                if (unitA < unitB) {
                    document.getElementById('card-a').classList.add('winner');
                } else if (unitB < unitA) {
                    document.getElementById('card-b').classList.add('winner');
                }
            }
        }

        // --- æŠ˜æ‰£è¨ˆç®—åŠŸèƒ½ ---
        let currentOption = 1;

        function selectOption(opt) {
            currentOption = opt;
            document.querySelectorAll('.calc-option').forEach(el => el.classList.remove('selected'));
            document.querySelectorAll('.calc-option')[opt-1].classList.add('selected');
            calculateDiscount(); // é‡æ–°è¨ˆç®—
        }

        function calculateDiscount() {
            const price = parseFloat(document.getElementById('orig-price').value) || 0;
            let finalUnit = 0;
            let totalCost = 0;
            let totalItems = 0;

            if (currentOption === 1) {
                // ç¬¬äºŒä»¶ XX å…ƒ
                const val = parseFloat(document.getElementById('val-1').value) || 0;
                if (price > 0) {
                    totalCost = price + val;
                    totalItems = 2;
                    finalUnit = totalCost / 2;
                }
            } else if (currentOption === 2) {
                // ç¬¬äºŒä»¶ XX æŠ˜ (ä¾‹å¦‚ 6æŠ˜ = 0.6)
                let val = parseFloat(document.getElementById('val-2').value) || 0;
                // é˜²å‘†ï¼šå¦‚æœä½¿ç”¨è€…è¼¸å…¥ 60ï¼Œç•¶ä½œ 6æŠ˜ï¼›è¼¸å…¥ 6ï¼Œç•¶ä½œ 6æŠ˜
                if (val > 10) val = val / 10; 
                
                if (price > 0 && val > 0) {
                    const secondPrice = price * (val / 10); // å°ç£ç¿’æ…£ï¼š6æŠ˜ = x0.6
                    totalCost = price + secondPrice;
                    totalItems = 2;
                    finalUnit = totalCost / 2;
                }
            } else if (currentOption === 3) {
                // XX ä»¶å…± XX å…ƒ
                const count = parseFloat(document.getElementById('val-3a').value) || 0;
                const total = parseFloat(document.getElementById('val-3b').value) || 0;
                if (count > 0 && total > 0) {
                    totalCost = total;
                    totalItems = count;
                    finalUnit = total / count;
                }
            }

            // é¡¯ç¤ºçµæœ
            const resultEl = document.getElementById('final-unit-price');
            const infoEl = document.getElementById('discount-info');
            
            if (finalUnit > 0) {
                resultEl.innerText = finalUnit.toFixed(1); // å°æ•¸é»ä¸€ä½
                
                if (price > 0) {
                    // è¨ˆç®—ç›¸ç•¶æ–¼å¹¾æŠ˜
                    const discountRate = (finalUnit / price) * 10;
                    infoEl.innerText = `ç›¸ç•¶æ–¼åŸåƒ¹ ${discountRate.toFixed(1)} æŠ˜`;
                } else if (currentOption === 3) {
                    infoEl.innerText = "ç›´æ¥æ›ç®—å–®åƒ¹";
                }
            } else {
                resultEl.innerText = "0";
                infoEl.innerText = "è«‹è¼¸å…¥æ•¸å€¼";
            }
        }
    </script>
</body>
</html>
